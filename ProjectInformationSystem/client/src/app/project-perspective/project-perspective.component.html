

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

<div class="form-container">
  <h3>Project Perspective Form</h3>
  <form [formGroup]="perspectiveForm" (ngSubmit)="onSubmit()" enctype="multipart/form-data">
    <label>Upload Project Perspective</label>
    <input type="file" (change)="onFileChange($event)" #fileInput [required]="!isEditing" />

    <label for="description">Description</label>
    <input
      type="text"
      formControlName="description"
      required
      style="width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 5px;"
    />

    <div class="button-group">
      <button type="button" class="new-btn" (click)="openNewForm()">New</button>
      <button type="submit" class="submit-btn">{{ isEditing ? 'Update' : 'Submit' }}</button>
    </div>
  </form>
</div>

<div class="form-container" *ngIf="submittedData.length > 0">
  <h3>Submitted Perspectives</h3>
  <table>
    <thead>
      <tr>
        <th>Perspective ID</th>
        <th>Project SrNo</th>
        <th>File Name</th>
        <!-- <th>File Path</th> -->
        <th>Description</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of submittedData">
        <td>{{ item.perspectiveId }}</td>
        <td>{{ item.Project_SrNo }}</td>
        <td>
          <a [href]="'http://localhost:5000/' + item.filePath" target="_blank" download>
            {{ item.fileName }}
          </a>
        </td>
        <!-- <td>{{ item.filePath }}</td> -->
        <td>{{ item.description }}</td>
        <td>
          <button class="edit-btn" style="color: blue;"  (click)="editEntry(item)">
            <i class="fa fa-edit"></i>
          </button>
          <button class="delete-btn" (click)="deleteEntry(item.Project_SrNo)">
            <i class="fa fa-trash"></i>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
